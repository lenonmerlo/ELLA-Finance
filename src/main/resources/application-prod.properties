logging.level.root=INFO
logging.level.com.ella=INFO
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.hibernate.ddl-auto=validate

# Performance: enable JDBC batching for bulk inserts/updates (e.g., invoice uploads)
spring.jpa.properties.hibernate.jdbc.batch_size=${HIBERNATE_JDBC_BATCH_SIZE:50}
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.jdbc.batch_versioned_data=true
spring.datasource.url=${DB_URL}
spring.datasource.username=${DB_USERNAME}
spring.datasource.password=${DB_PASSWORD}

# Postgres driver optimization for batching
spring.datasource.hikari.data-source-properties.reWriteBatchedInserts=true
# Email
# In produção, habilite envio definindo EMAIL_ENABLED=true (default true aqui).
# Para desabilitar, defina EMAIL_ENABLED=false.
email.enabled=${EMAIL_ENABLED:true}
email.from=noreply@ellafinance.com.br
email.require-config-on-startup=${EMAIL_REQUIRE_CONFIG_ON_STARTUP:true}

# Frontend (usado para gerar o link de reset de senha)
# Em produção, configure obrigatoriamente APP_FRONTEND_BASE_URL (ex: https://app.ellafinance.com.br)
app.frontend.base-url=${APP_FRONTEND_BASE_URL}
app.frontend.reset-password-path=${APP_FRONTEND_RESET_PASSWORD_PATH:/reset-password}
ella.ocr.enabled=false
ella.ocr.language=por
ella.ocr.pdf.render-dpi=220
ella.ocr.pdf.max-pages=6
ella.invoice.debug.log-extracted-text=false
ella.score.diversity.lookback-days=90
ella.score.consistency.months=3
ella.critical.enabled=true
ella.critical.amount-threshold=5000
jwt.secret=${JWT_SECRET}
jwt.expiration=${JWT_EXPIRATION:3600000}
jwt.refreshExpiration=${JWT_REFRESH_EXPIRATION:604800000}
cors.allowedOrigins=${CORS_ALLOWED_ORIGINS:*}
ella.extractor.base-url=${ELLA_EXTRACTOR_URL:https://ella-extractor.onrender.com}
spring.flyway.enabled=true
spring.flyway.locations=classpath:db/migration
spring.flyway.baseline-on-migrate=true
server.port=${PORT:8080}
ella.dashboard.transactions.limit=${ELLA_DASHBOARD_TRANSACTIONS_LIMIT:100}

# Cache (Caffeine)
spring.cache.type=caffeine
spring.cache.cache-names=dashboard
spring.cache.caffeine.spec=maximumSize=${ELLA_CACHE_DASHBOARD_MAX_SIZE:500},expireAfterWrite=${ELLA_CACHE_DASHBOARD_TTL_SECONDS:60}s
