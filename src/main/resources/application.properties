spring.application.name=backend
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.hibernate.ddl-auto=validate
spring.datasource.url=jdbc:postgresql://localhost:5432/ella
spring.datasource.username=${DB_USERNAME:postgres}
spring.datasource.password=${DB_PASSWORD:123456}

jwt.secret=${JWT_SECRET:HuKj8xZ2n4v6y1A3b9C5d7e8f0g1h2i3j4k5l6m7n8o9p0q1r2s3t4u5v6w7x8y9}
jwt.expiration=${JWT_EXPIRATION:900000}
jwt.refreshExpiration=604800000

cors.allowedOrigins=${CORS_ALLOWED_ORIGINS:http://localhost:3000,http://localhost:5173,http://localhost:5174}

# OCR (scanned PDFs)
# Enable OCR fallback for scanned/image-only invoices.
ella.ocr.enabled=${ELLA_OCR_ENABLED:true}
# Tesseract language(s). Examples: por, eng, por+eng
ella.ocr.language=${ELLA_OCR_LANGUAGE:por}
# Optional tessdata folder (where "tessdata" lives). If blank, relies on local installation/env (e.g., TESSDATA_PREFIX).
ella.ocr.tessdata-path=${ELLA_OCR_TESSDATA_PATH:}

# PDF -> image rendering settings for OCR
# If extracted PDF text length is below this threshold, OCR will be attempted.
ella.ocr.pdf.min-text-length=${ELLA_OCR_PDF_MIN_TEXT_LENGTH:200}
# Rendering DPI (higher = better accuracy, slower). Typical: 200-300.
ella.ocr.pdf.render-dpi=${ELLA_OCR_PDF_RENDER_DPI:220}
# Safety cap to avoid very large invoices locking the server.
ella.ocr.pdf.max-pages=${ELLA_OCR_PDF_MAX_PAGES:6}

# Invoice PDF text debug (DEV ONLY)
# When enabled, logs the raw extracted text that is fed into the invoice parsers.
# WARNING: this may contain sensitive transaction data.
ella.invoice.debug.log-extracted-text=${ELLA_INVOICE_DEBUG_LOG_EXTRACTED_TEXT:false}
# Max chars to print when logging extracted text. Use 0 or negative to print full text.
ella.invoice.debug.extracted-text-max-chars=${ELLA_INVOICE_DEBUG_EXTRACTED_TEXT_MAX_CHARS:2000}

# DEV ONLY: logs a small snippet around due-date keywords instead of dumping full text.
ella.invoice.debug.due-date-snippets=${ELLA_INVOICE_DEBUG_DUE_DATE_SNIPPETS:false}
ella.invoice.debug.due-date-context-chars=${ELLA_INVOICE_DEBUG_DUE_DATE_CONTEXT_CHARS:140}

# Critical transactions (backend detection)
ella.critical.enabled=true
ella.critical.amount-threshold=5000

# DEV ONLY: habilita /api/auth/dev/reset-password (somente para ambiente local)
# Você pode sobrescrever por variável de ambiente APP_DEV_RESET_PASSWORD_TOKEN.
app.dev.reset-password-token=${APP_DEV_RESET_PASSWORD_TOKEN:}
